{
	"info": {
		"_postman_id": "4bb03893-9a51-4789-9d25-933f3083cde7",
		"name": "Portal_TESTES_API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "26785457"
	},
	"item": [
		{
			"name": "Pedidos",
			"item": [
				{
					"name": "Pedido",
					"item": [
						{
							"name": "Fazer login",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"const response = pm.response.json();\r",
											"pm.environment.set(\"access_token\", response.accessToken);\r",
											"pm.environment.set(\"refresh_token\", response.refreshToken);\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkNzg3NjFhNy1kYTA0LTQ5Y2QtYjY1YS04ZGI4ZGZmYWExMjQiLCJlbWFpbCI6InRpLmRldkBhdHRvc2VtZW50ZXMuY29tLmJyIiwic3ViIjoyMDU0LCJncm91cCI6eyJjb2RlIjoiQURNSU4iLCJuYW1lIjoiQURNSU5JU1RSQURPUiIsInBlcm1pc3Npb25zIjpbXX0sImlhdCI6MTcwMTM0ODUzMiwiZXhwIjoxNzAxMzQ5NDMyLCJhdWQiOlsiNmQ3MmU0NDAtODYzMC00ZjlmLTk4YTQtOTIxMmJjZDk5NWVjIl0sImlzcyI6ImIzMjc3M2JjLTJlODEtNDk3Zi1hZTUwLWFhYzU0NTMyMzRmNCJ9.QamYu_5ZWKzIEnEDuwdai42g9LfyDa2sg7nolRFVd1K1505-czL0Mk_tzMxheHBtktqiK0j6-6JN7zrUcRnqekWRbf7nFE5h_RbHPfLTBSfMzX3hDbXr01Pm7K7hVmDHBMChF3rWhwWr_w9u0z-pH9MMp809lGiw2R51M5CW8w8",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"document\": \"{{user_test_document}}\",\r\n  \"password\": \"{{user_test_password}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{host}}/api/auth/login",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"auth",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Criar novo pedido [Tradicional]",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"pm.test(\"Validar a mensagem de retorno\", function () {\r",
											"    pm.expect(pm.response.json().situacao).to.be.eql(\"AGUARDANDO_INTEGRACAO\")    \r",
											"});\r",
											"\r",
											"pm.test(\"Capturar o id\", function() {\r",
											"    pm.globals.set(\"pedidoId\", pm.response.json().id)\r",
											"});\r",
											"\r",
											"pm.test(\"Schema é válido\", function() {\r",
											"    pm.expect(tv4.validate(pm.response.json(), pm.globals.get('schema'))).to.be.true;\r",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.globals.set(\"schema\", {\r",
											"  \"$schema\": \"http://json-schema.org/draft-04/schema#\",\r",
											"  \"type\": \"object\",\r",
											"  \"properties\": {\r",
											"    \"id\": {\r",
											"      \"type\": \"integer\"\r",
											"    },\r",
											"    \"situacao\": {\r",
											"      \"type\": \"string\"\r",
											"    }\r",
											"  },\r",
											"  \"required\": [\r",
											"    \"id\",\r",
											"    \"situacao\"\r",
											"  ]\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n   \"tipoEntrega\":\"FOB\",\r\n   \"needCheckValues\":false,\r\n   \"garantiaId\":2,\r\n   \"calcParams\":\"{}\",\r\n   \"previsaoEntrega\":\"2023-11-30\",\r\n   \"quantidadeParcela\":1,\r\n   \"isRascunho\":false,\r\n   \"inconformidades\":[\r\n      \r\n   ],\r\n   \"peneiras\":[\r\n      \r\n   ],\r\n   \"peneirasPreferenciais\":[\r\n      \r\n   ],\r\n   \"observacao\":null,\r\n   \"percentualDescontoCultivar\":0,\r\n   \"percentualDescontoTratamento\":0,\r\n   \"percentualDescontoPontualidade\":0,\r\n   \"items\":[\r\n      {\r\n         \"ref\":\"8a52adad180869f942463ff7ec52e6b6dd4f63ed65057c839868ed5a7e87906b\",\r\n         \"index\":0,\r\n         \"tratamentoId\":null,\r\n         \"percentualDescontoCultivar\":null,\r\n         \"percentualDescontoTratamento\":null,\r\n         \"area\":null,\r\n         \"custoCultivar\":26285.000000000004,\r\n         \"custoCultivarIcmsIsento\":0,\r\n         \"custoCultivarIcmsNaoIsento\":0,\r\n         \"cultivarDescontoPontualidade\":0,\r\n         \"cultivarJurosPosDataBase\":0,\r\n         \"cultivarDescontoAntecipacao\":-6712.10708656158,\r\n         \"custoTratamento\":0,\r\n         \"custoTratamentoIcmsIsento\":0,\r\n         \"custoTratamentoIcmsNaoIsento\":0,\r\n         \"tratamentoDescontoPontualidade\":0,\r\n         \"tratamentoJurosPosDataBase\":0,\r\n         \"tratamentoDescontoAntecipacao\":0,\r\n         \"custoFrete\":780.06,\r\n         \"freteDescontoPorData\":0,\r\n         \"custoFreteIcmsIsento\":0,\r\n         \"custoFreteIcmsNaoIsento\":0,\r\n         \"freteDescontoPontualidade\":0,\r\n         \"custoTecnologia\":5980,\r\n         \"custoTecnologiaIcmsIsento\":0,\r\n         \"custoTecnologiaIcmsNaoIsento\":0,\r\n         \"tecnologiaJurosPosDataBase\":0,\r\n         \"tecnologiaDescontoAntecipacao\":0,\r\n         \"volume\":2000,\r\n         \"subtotal\":25552.89291343842,\r\n         \"valorLiquido\":25552.89,\r\n         \"valorLiquidoAplicadoPontualidade\":25552.89,\r\n         \"cultivarId\":187,\r\n         \"itemOrigemId\":null,\r\n         \"embalagemId\":2,\r\n         \"peneiraId\":1,\r\n         \"quantidade\":10\r\n      }\r\n   ],\r\n   \"parcelas\":[\r\n      {\r\n         \"numero\":1,\r\n         \"data\":\"2021-11-08\",\r\n         \"porcentagem\":100,\r\n         \"valor\":25552.89\r\n      }\r\n   ],\r\n   \"totais\":{\r\n      \"subtotal\":25552.89291343842,\r\n      \"valorDesconto\":0,\r\n      \"valorFrete\":780.06,\r\n      \"valorLiquido\":25552.89,\r\n      \"valorLiquidoWithPontualidade\":18307.63,\r\n      \"valorPontualidade\":0\r\n   },\r\n   \"flagFlex\":false,\r\n   \"campanhaId\":6002,\r\n   \"flagGarantiaAttoEvo\":true,\r\n   \"moedaId\":1,\r\n   \"cotacaoDolar\":null,\r\n   \"clienteId\":3215,\r\n   \"clienteEnderecoId\":103215,\r\n   \"vendedorId\":48\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{host}}/api/pedidos/tradicional",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"pedidos",
										"tradicional"
									]
								}
							},
							"response": []
						},
						{
							"name": "Buscar detalhes do pedido por ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"//Validar se o ID retornado é o mesmo do pedido\r",
											"pm.test(\"Validar o Id retornado\"), function () {\r",
											"    pm.expect(pm.response.json().id).to.be.eql(pm.globals.get(\"pedidoId\"))\r",
											"};\r",
											"\r",
											"// Validar se o campo \"tipoEntrega\" está presente e possui o valor o esperado\r",
											"pm.test(\"Testar campo tipoEntrega\", function() {\r",
											"    pm.expect(pm.response.json().tipoEntrega).to.eql(\"FOB\");\r",
											"});\r",
											"\r",
											"//Validar a situação do pedido\r",
											"pm.test(\"Validar a situacao do pedido\", function () {\r",
											"    pm.expect(pm.response.json().situacao).to.be.eql(\"AGUARDANDO_INTEGRACAO\")    \r",
											"});\r",
											"\r",
											"//Validar situacaoErp\r",
											"pm.test(\"Validar a situacao ERP\", function () {\r",
											"    pm.expect(pm.response.json().situacaoErp).to.be.eql(\"AGUARDANDO_CHAMADA_ERP\")    \r",
											"});\r",
											"\r",
											"// Validar se o campo \"tipoCampanha\" está presente e possui o valor o esperado\r",
											"pm.test(\"Testar campo tipoCampanha\", function() {\r",
											"    pm.expect(pm.response.json().tipoCampanha).to.eql(\"TRADICIONAL\");\r",
											"});\r",
											"\r",
											"// Verificar se o campo \"tipoPedido\" está presente no response body e é uma string\r",
											"pm.test(\"Validar campo tipoPedido\", function() {\r",
											"    pm.expect(pm.response.json().tipoPedido).to.exist;\r",
											"    pm.expect(pm.response.json().tipoPedido).to.be.a('string');\r",
											"});\r",
											"\r",
											"// Verificar se o valor do campo \"statusDesmembramentoOrigem\" é igual a \"AGUARDANDO\" e é uma string\r",
											"pm.test(\"Verificar o valor do campo 'statusDesmembramentoOrigem'\", function() {\r",
											"    pm.expect(pm.response.json().statusDesmembramentoOrigem).to.eql(\"AGUARDANDO\");\r",
											"    pm.expect(pm.response.json().statusDesmembramentoOrigem).to.be.a('string');\r",
											"});\r",
											"\r",
											"// Verificar se o valor do campo \"statusDesmembramentoFilho\" é igual a \"AGUARDANDO\" e é uma string\r",
											"pm.test(\"Verificar o valor do campo 'statusDesmembramentoFilho'\", function() {\r",
											"    pm.expect(pm.response.json().statusDesmembramentoFilho).to.eql(\"AGUARDANDO\");\r",
											"    pm.expect(pm.response.json().statusDesmembramentoFilho).to.be.a('string');\r",
											"});\r",
											"\r",
											"// Validar se o campo \"tipoCampanha\" está presente e possui o valor o esperado\r",
											"pm.test(\"Testar campo tipoCampanha\", function() {\r",
											"    pm.expect(pm.response.json().tipoCampanha).to.eql(\"TRADICIONAL\");\r",
											"    pm.expect(pm.response.json().tipoCampanha).to.be.a('string');\r",
											"});\r",
											"\r",
											"// Validar se o campo id do \"tipoGarantia\" está presente e possui o valor o esperado\r",
											"pm.test(\"Testar campo 'id' do tipoGarantia\", function() {\r",
											"    const responseBody = pm.response.json();\r",
											"\r",
											"    pm.expect(responseBody.tipoGarantia).to.exist;\r",
											"    pm.expect(responseBody.tipoGarantia.id).to.exist;\r",
											"    pm.expect(responseBody.tipoGarantia.id).to.be.eql(2);\r",
											"    pm.expect(responseBody.tipoGarantia.id).to.be.a('number');            //CONFORME SCHEMA, O TIPOGRANTIA.ID DEVERIA SER 'integer'\r",
											"});\r",
											"\r",
											"// Validar se o campo nome do \"tipoGarantia\" está presente e possui o valor o esperado\r",
											"pm.test(\"Testar campo 'nome' do tipoGarantia\", function() {\r",
											"    const responseBody = pm.response.json();\r",
											"\r",
											"    pm.expect(responseBody.tipoGarantia).to.exist;\r",
											"    pm.expect(responseBody.tipoGarantia.nome).to.exist;\r",
											"    pm.expect(responseBody.tipoGarantia.nome).to.be.eql(\"ATTO EVO\");\r",
											"    pm.expect(responseBody.tipoGarantia.nome).to.be.a('string');\r",
											"});\r",
											"\r",
											"// Verificar se o objeto 'campanha' está presente\r",
											"pm.test(\"Validar campo ID dentro do objeto campanha\", function() {\r",
											"    const responseBody = pm.response.json();\r",
											"\r",
											"    // Verificar se o objeto 'campanha' está presente\r",
											"    pm.expect(responseBody.campanha).to.exist;\r",
											"\r",
											"    // Verificar se o campo 'id' está presente dentro do objeto 'campanha'\r",
											"    pm.expect(responseBody.campanha.id).to.exist;\r",
											"\r",
											"    // Verificar se o campo 'id' é um número\r",
											"    pm.expect(responseBody.campanha.id).to.be.a('number');\r",
											"});\r",
											"\r",
											"// Verificar se o objeto 'cliente' está presente\r",
											"pm.test(\"Validar campo ID dentro do objeto 'cliente'\", function() {\r",
											"    const responseBody = pm.response.json();\r",
											"\r",
											"    // Verificar se o objeto 'cliente' está presente\r",
											"    pm.expect(responseBody.cliente).to.exist;\r",
											"\r",
											"    // Verificar se o campo 'id' está presente dentro do objeto 'cliente'\r",
											"    pm.expect(responseBody.cliente.id).to.exist;\r",
											"\r",
											"    // Verificar se o campo 'id' é um número\r",
											"    pm.expect(responseBody.cliente.id).to.be.a('number');\r",
											"});\r",
											"\r",
											"// Verificar se o campo'razaoSocial'está presente dentro do objeto 'cliente'\r",
											"pm.test(\"Validar campo razaoSocial dentro do objeto cliente\", function() {\r",
											"    const responseBody = pm.response.json();\r",
											"\r",
											"    // Verificar se o campo 'razaoSocial' está presente dentro do objeto 'campanha'\r",
											"    pm.expect(responseBody.cliente.razaoSocial).to.exist;\r",
											"\r",
											"    // Verificar se o campo 'id' é um número\r",
											"    pm.expect(responseBody.cliente.razaoSocial).to.be.a('string');\r",
											"\r",
											"    // Verificar se o valor do campo \"tipoPedido\" é igual a \"AGRO COMERCIAL KLEIN LTDA\"\r",
											"    pm.expect(responseBody.cliente.razaoSocial).to.eql(\"AGRO COMERCIAL KLEIN LTDA\");\r",
											"});\r",
											"\r",
											"pm.test(\"Schema é válido\", function() {\r",
											"    pm.expect(tv4.validate(pm.response.json(), pm.globals.get('schema'))).to.be.true;\r",
											"});\r",
											"\r",
											"pm.test(\"Validar presença dos campos 'valorBruto', 'valorLiquido' e 'valorDesconto'\", function() {\r",
											"    const totais = pm.response.json().totais;\r",
											"\r",
											"    // Verificar se 'totais' está presente no response body\r",
											"    pm.expect(totais).to.exist;\r",
											"\r",
											"    // Verificar se 'valorBruto' está presente em 'totais'\r",
											"    pm.expect(totais).to.have.property('valorBruto');\r",
											"\r",
											"    // Verificar se 'valorLiquido' está presente em 'totais'\r",
											"    pm.expect(totais).to.have.property('valorLiquido');\r",
											"\r",
											"    // Verificar se 'valorDesconto' está presente em 'totais'\r",
											"    pm.expect(totais).to.have.property('valorDesconto');\r",
											"});\r",
											"\r",
											"// Validar se o campo \"valorLiquido\" é a diferença entre \"valorBruto\" e \"valorDesconto\"\r",
											"pm.test(\"Testar lógica de cálculo do campo valorLiquido\", function() {\r",
											"    const valorBruto = pm.response.json().totais.valorBruto;\r",
											"    const valorDesconto = pm.response.json().totais.valorDesconto;\r",
											"    const valorLiquido = pm.response.json().totais.valorLiquido;\r",
											"\r",
											"    // Verificar se a diferença entre valorBruto e valorDesconto é igual a valorLiquido, com uma margem de erro de 0.01\r",
											"    pm.expect(valorLiquido).to.be.closeTo(valorBruto - valorDesconto, 0.01);\r",
											"});\r",
											"\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.globals.set(\"schema\", {\r",
											"  \"$schema\": \"http://json-schema.org/draft-04/schema#\",\r",
											"  \"type\": \"object\",\r",
											"  \"properties\": {\r",
											"    \"id\": {\r",
											"      \"type\": \"integer\"\r",
											"    },\r",
											"    \"tipoEntrega\": {\r",
											"      \"type\": \"string\"\r",
											"    },\r",
											"    \"situacao\": {\r",
											"      \"type\": \"string\"\r",
											"    },\r",
											"    \"situacaoErp\": {\r",
											"      \"type\": \"string\"\r",
											"    },\r",
											"    \"flagFlex\": {\r",
											"      \"type\": \"boolean\"\r",
											"    },\r",
											"    \"previsaoEntrega\": {\r",
											"      \"type\": \"string\"\r",
											"    },\r",
											"    \"pedidoOrigemId\": {\r",
											"      \"type\": \"null\"\r",
											"    },\r",
											"    \"dataEmissaoOrigem\": {\r",
											"      \"type\": \"string\"\r",
											"    },\r",
											"    \"tipoCampanha\": {\r",
											"      \"type\": \"string\"\r",
											"    },\r",
											"    \"tipoPedido\": {\r",
											"      \"type\": \"string\"\r",
											"    },\r",
											"    \"observacao\": {\r",
											"      \"type\": \"null\"\r",
											"    },\r",
											"    \"percentualDescontoSemente\": {\r",
											"      \"type\": \"integer\"\r",
											"    },\r",
											"    \"percentualDescontoTratamento\": {\r",
											"      \"type\": \"integer\"\r",
											"    },\r",
											"    \"percentualDescontoPontualidade\": {\r",
											"      \"type\": \"integer\"\r",
											"    },\r",
											"    \"pedidoFilhoId\": {\r",
											"      \"type\": \"null\"\r",
											"    },\r",
											"    \"descartado\": {\r",
											"      \"type\": \"boolean\"\r",
											"    },\r",
											"    \"produtosConvertidos\": {\r",
											"      \"type\": \"boolean\"\r",
											"    },\r",
											"    \"statusDesmembramentoOrigem\": {\r",
											"      \"type\": \"string\"\r",
											"    },\r",
											"    \"statusDesmembramentoFilho\": {\r",
											"      \"type\": \"string\"\r",
											"    },\r",
											"    \"cotacaoDolar\": {\r",
											"      \"type\": \"null\"\r",
											"    },\r",
											"    \"campanha\": {\r",
											"      \"type\": \"object\",\r",
											"      \"properties\": {\r",
											"        \"id\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"nome\": {\r",
											"          \"type\": \"string\"\r",
											"        },\r",
											"        \"porcentagemArremateMinimo\": {\r",
											"          \"type\": \"null\"\r",
											"        },\r",
											"        \"flagPedidoFlex\": {\r",
											"          \"type\": \"boolean\"\r",
											"        },\r",
											"        \"flagSomentePeneiraLivre\": {\r",
											"          \"type\": \"boolean\"\r",
											"        },\r",
											"        \"msgPedidoFlex\": {\r",
											"          \"type\": \"null\"\r",
											"        },\r",
											"        \"dataAlteracaoPedidoFlex\": {\r",
											"          \"type\": \"null\"\r",
											"        }\r",
											"      },\r",
											"      \"required\": [\r",
											"        \"id\",\r",
											"        \"nome\",\r",
											"        \"porcentagemArremateMinimo\",\r",
											"        \"flagPedidoFlex\",\r",
											"        \"flagSomentePeneiraLivre\",\r",
											"        \"msgPedidoFlex\",\r",
											"        \"dataAlteracaoPedidoFlex\"\r",
											"      ]\r",
											"    },\r",
											"    \"cliente\": {\r",
											"      \"type\": \"object\",\r",
											"      \"properties\": {\r",
											"        \"id\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"razaoSocial\": {\r",
											"          \"type\": \"string\"\r",
											"        },\r",
											"        \"documento\": {\r",
											"          \"type\": \"string\"\r",
											"        },\r",
											"        \"segmentacao\": {\r",
											"          \"type\": \"string\"\r",
											"        },\r",
											"        \"tipoPessoa\": {\r",
											"          \"type\": \"string\"\r",
											"        }\r",
											"      },\r",
											"      \"required\": [\r",
											"        \"id\",\r",
											"        \"razaoSocial\",\r",
											"        \"documento\",\r",
											"        \"segmentacao\",\r",
											"        \"tipoPessoa\"\r",
											"      ]\r",
											"    },\r",
											"    \"endereco\": {\r",
											"      \"type\": \"object\",\r",
											"      \"properties\": {\r",
											"        \"id\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"nome\": {\r",
											"          \"type\": \"string\"\r",
											"        },\r",
											"        \"rota\": {\r",
											"          \"type\": \"string\"\r",
											"        },\r",
											"        \"razaoSocial\": {\r",
											"          \"type\": \"string\"\r",
											"        },\r",
											"        \"valorFrete\": {\r",
											"          \"type\": \"null\"\r",
											"        },\r",
											"        \"inscricaoEstadual\": {\r",
											"          \"type\": \"string\"\r",
											"        },\r",
											"        \"inscricaoEstadualIsento\": {\r",
											"          \"type\": \"boolean\"\r",
											"        },\r",
											"        \"cidade\": {\r",
											"          \"type\": \"object\",\r",
											"          \"properties\": {\r",
											"            \"id\": {\r",
											"              \"type\": \"integer\"\r",
											"            },\r",
											"            \"nome\": {\r",
											"              \"type\": \"string\"\r",
											"            },\r",
											"            \"estado\": {\r",
											"              \"type\": \"object\",\r",
											"              \"properties\": {\r",
											"                \"id\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"nome\": {\r",
											"                  \"type\": \"string\"\r",
											"                },\r",
											"                \"uf\": {\r",
											"                  \"type\": \"string\"\r",
											"                }\r",
											"              },\r",
											"              \"required\": [\r",
											"                \"id\",\r",
											"                \"nome\",\r",
											"                \"uf\"\r",
											"              ]\r",
											"            },\r",
											"            \"grupoMunicipio\": {\r",
											"              \"type\": \"object\",\r",
											"              \"properties\": {\r",
											"                \"id\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"nome\": {\r",
											"                  \"type\": \"string\"\r",
											"                }\r",
											"              },\r",
											"              \"required\": [\r",
											"                \"id\",\r",
											"                \"nome\"\r",
											"              ]\r",
											"            }\r",
											"          },\r",
											"          \"required\": [\r",
											"            \"id\",\r",
											"            \"nome\",\r",
											"            \"estado\",\r",
											"            \"grupoMunicipio\"\r",
											"          ]\r",
											"        },\r",
											"        \"cidadeIe\": {\r",
											"          \"type\": \"null\"\r",
											"        },\r",
											"        \"nomeFantasia\": {\r",
											"          \"type\": \"null\"\r",
											"        }\r",
											"      },\r",
											"      \"required\": [\r",
											"        \"id\",\r",
											"        \"nome\",\r",
											"        \"rota\",\r",
											"        \"razaoSocial\",\r",
											"        \"valorFrete\",\r",
											"        \"inscricaoEstadual\",\r",
											"        \"inscricaoEstadualIsento\",\r",
											"        \"cidade\",\r",
											"        \"cidadeIe\",\r",
											"        \"nomeFantasia\"\r",
											"      ]\r",
											"    },\r",
											"    \"vendedor\": {\r",
											"      \"type\": \"object\",\r",
											"      \"properties\": {\r",
											"        \"id\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"name\": {\r",
											"          \"type\": \"string\"\r",
											"        }\r",
											"      },\r",
											"      \"required\": [\r",
											"        \"id\",\r",
											"        \"name\"\r",
											"      ]\r",
											"    },\r",
											"    \"moeda\": {\r",
											"      \"type\": \"object\",\r",
											"      \"properties\": {\r",
											"        \"id\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"nome\": {\r",
											"          \"type\": \"string\"\r",
											"        }\r",
											"      },\r",
											"      \"required\": [\r",
											"        \"id\",\r",
											"        \"nome\"\r",
											"      ]\r",
											"    },\r",
											"    \"tipoGarantia\": {\r",
											"      \"type\": \"object\",\r",
											"      \"properties\": {\r",
											"        \"id\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"nome\": {\r",
											"          \"type\": \"string\"\r",
											"        }\r",
											"      },\r",
											"      \"required\": [\r",
											"        \"id\",\r",
											"        \"nome\"\r",
											"      ]\r",
											"    },\r",
											"    \"totais\": {\r",
											"      \"type\": \"object\",\r",
											"      \"properties\": {\r",
											"        \"valorBruto\": {\r",
											"          \"type\": \"number\"\r",
											"        },\r",
											"        \"valorLiquido\": {\r",
											"          \"type\": \"number\"\r",
											"        },\r",
											"        \"valorDesconto\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"valorFrete\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"valorPontualidade\": {\r",
											"          \"type\": \"integer\"\r",
											"        }\r",
											"      },\r",
											"      \"required\": [\r",
											"        \"valorBruto\",\r",
											"        \"valorLiquido\",\r",
											"        \"valorDesconto\",\r",
											"        \"valorFrete\",\r",
											"        \"valorPontualidade\"\r",
											"      ]\r",
											"    },\r",
											"    \"notifications\": {\r",
											"      \"type\": \"array\",\r",
											"      \"items\": {}\r",
											"    },\r",
											"    \"filial\": {\r",
											"      \"type\": \"object\",\r",
											"      \"properties\": {\r",
											"        \"id\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"razaoSocial\": {\r",
											"          \"type\": \"string\"\r",
											"        },\r",
											"        \"tipoFilial\": {\r",
											"          \"type\": \"string\"\r",
											"        }\r",
											"      },\r",
											"      \"required\": [\r",
											"        \"id\",\r",
											"        \"razaoSocial\",\r",
											"        \"tipoFilial\"\r",
											"      ]\r",
											"    }\r",
											"  },\r",
											"  \"required\": [\r",
											"    \"id\",\r",
											"    \"tipoEntrega\",\r",
											"    \"situacao\",\r",
											"    \"situacaoErp\",\r",
											"    \"flagFlex\",\r",
											"    \"previsaoEntrega\",\r",
											"    \"pedidoOrigemId\",\r",
											"    \"dataEmissaoOrigem\",\r",
											"    \"tipoCampanha\",\r",
											"    \"tipoPedido\",\r",
											"    \"observacao\",\r",
											"    \"percentualDescontoSemente\",\r",
											"    \"percentualDescontoTratamento\",\r",
											"    \"percentualDescontoPontualidade\",\r",
											"    \"pedidoFilhoId\",\r",
											"    \"descartado\",\r",
											"    \"produtosConvertidos\",\r",
											"    \"statusDesmembramentoOrigem\",\r",
											"    \"statusDesmembramentoFilho\",\r",
											"    \"cotacaoDolar\",\r",
											"    \"campanha\",\r",
											"    \"cliente\",\r",
											"    \"endereco\",\r",
											"    \"vendedor\",\r",
											"    \"moeda\",\r",
											"    \"tipoGarantia\",\r",
											"    \"totais\",\r",
											"    \"notifications\",\r",
											"    \"filial\"\r",
											"  ]\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{host}}/api/pedidos/{{pedidoId}}/detalhes",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"pedidos",
										"{{pedidoId}}",
										"detalhes"
									],
									"query": [
										{
											"key": "bodyType",
											"value": "short",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Buscar itens do pedido por ID Copy",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.globals.set(\"schema\",{\r",
											"  \"$schema\": \"http://json-schema.org/draft-04/schema#\",\r",
											"  \"type\": \"array\",\r",
											"  \"items\": [\r",
											"    {\r",
											"      \"type\": \"object\",\r",
											"      \"properties\": {\r",
											"        \"id\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"ref\": {\r",
											"          \"type\": \"string\"\r",
											"        },\r",
											"        \"index\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"volume\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"area\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"tipoHibrido\": {\r",
											"          \"type\": \"null\"\r",
											"        },\r",
											"        \"plantasMetro\": {\r",
											"          \"type\": \"null\"\r",
											"        },\r",
											"        \"plantasAdicionais\": {\r",
											"          \"type\": \"null\"\r",
											"        },\r",
											"        \"plantasHa\": {\r",
											"          \"type\": \"null\"\r",
											"        },\r",
											"        \"plantasTotais\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"quantidade\": {\r",
											"          \"type\": \"integer\"\r",
											"        },\r",
											"        \"produto\": {\r",
											"          \"type\": \"object\",\r",
											"          \"properties\": {\r",
											"            \"id\": {\r",
											"              \"type\": \"integer\"\r",
											"            },\r",
											"            \"nome\": {\r",
											"              \"type\": \"string\"\r",
											"            },\r",
											"            \"codigo\": {\r",
											"              \"type\": \"integer\"\r",
											"            },\r",
											"            \"hibrido\": {\r",
											"              \"type\": \"boolean\"\r",
											"            },\r",
											"            \"customNome\": {\r",
											"              \"type\": \"string\"\r",
											"            },\r",
											"            \"tipoFamilia\": {\r",
											"              \"type\": \"null\"\r",
											"            }\r",
											"          },\r",
											"          \"required\": [\r",
											"            \"id\",\r",
											"            \"nome\",\r",
											"            \"codigo\",\r",
											"            \"hibrido\",\r",
											"            \"customNome\",\r",
											"            \"tipoFamilia\"\r",
											"          ]\r",
											"        },\r",
											"        \"peneira\": {\r",
											"          \"type\": \"object\",\r",
											"          \"properties\": {\r",
											"            \"id\": {\r",
											"              \"type\": \"integer\"\r",
											"            },\r",
											"            \"nome\": {\r",
											"              \"type\": \"string\"\r",
											"            },\r",
											"            \"ordem\": {\r",
											"              \"type\": \"integer\"\r",
											"            }\r",
											"          },\r",
											"          \"required\": [\r",
											"            \"id\",\r",
											"            \"nome\",\r",
											"            \"ordem\"\r",
											"          ]\r",
											"        },\r",
											"        \"tratamentoQuimico\": {\r",
											"          \"type\": \"null\"\r",
											"        },\r",
											"        \"embalagem\": {\r",
											"          \"type\": \"object\",\r",
											"          \"properties\": {\r",
											"            \"id\": {\r",
											"              \"type\": \"integer\"\r",
											"            },\r",
											"            \"nome\": {\r",
											"              \"type\": \"string\"\r",
											"            },\r",
											"            \"kgs\": {\r",
											"              \"type\": \"integer\"\r",
											"            },\r",
											"            \"codigo\": {\r",
											"              \"type\": \"string\"\r",
											"            },\r",
											"            \"customNome\": {\r",
											"              \"type\": \"string\"\r",
											"            }\r",
											"          },\r",
											"          \"required\": [\r",
											"            \"id\",\r",
											"            \"nome\",\r",
											"            \"kgs\",\r",
											"            \"codigo\",\r",
											"            \"customNome\"\r",
											"          ]\r",
											"        },\r",
											"        \"valores\": {\r",
											"          \"type\": \"object\",\r",
											"          \"properties\": {\r",
											"            \"subtotal\": {\r",
											"              \"type\": \"number\"\r",
											"            },\r",
											"            \"valorLiquido\": {\r",
											"              \"type\": \"number\"\r",
											"            },\r",
											"            \"valorLiquidoPontualidade\": {\r",
											"              \"type\": \"number\"\r",
											"            },\r",
											"            \"cultivar\": {\r",
											"              \"type\": \"object\",\r",
											"              \"properties\": {\r",
											"                \"valor\": {\r",
											"                  \"type\": \"number\"\r",
											"                },\r",
											"                \"descontoSobItem\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"descontoGeral\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"preBase\": {\r",
											"                  \"type\": \"number\"\r",
											"                },\r",
											"                \"posBase\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"icmsIsento\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"peneiraLivre\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"pontualidade\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"percentualDesconto\": {\r",
											"                  \"type\": \"null\"\r",
											"                }\r",
											"              },\r",
											"              \"required\": [\r",
											"                \"valor\",\r",
											"                \"descontoSobItem\",\r",
											"                \"descontoGeral\",\r",
											"                \"preBase\",\r",
											"                \"posBase\",\r",
											"                \"icmsIsento\",\r",
											"                \"peneiraLivre\",\r",
											"                \"pontualidade\",\r",
											"                \"percentualDesconto\"\r",
											"              ]\r",
											"            },\r",
											"            \"tratamento\": {\r",
											"              \"type\": \"object\",\r",
											"              \"properties\": {\r",
											"                \"valor\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"descontoSobItem\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"descontoGeral\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"preBase\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"posBase\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"icmsIsento\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"peneiraLivre\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"pontualidade\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"percentualDesconto\": {\r",
											"                  \"type\": \"null\"\r",
											"                }\r",
											"              },\r",
											"              \"required\": [\r",
											"                \"valor\",\r",
											"                \"descontoSobItem\",\r",
											"                \"descontoGeral\",\r",
											"                \"preBase\",\r",
											"                \"posBase\",\r",
											"                \"icmsIsento\",\r",
											"                \"peneiraLivre\",\r",
											"                \"pontualidade\",\r",
											"                \"percentualDesconto\"\r",
											"              ]\r",
											"            },\r",
											"            \"tecnologia\": {\r",
											"              \"type\": \"object\",\r",
											"              \"properties\": {\r",
											"                \"valor\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"preBase\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"posBase\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"icmsIsento\": {\r",
											"                  \"type\": \"integer\"\r",
											"                }\r",
											"              },\r",
											"              \"required\": [\r",
											"                \"valor\",\r",
											"                \"preBase\",\r",
											"                \"posBase\",\r",
											"                \"icmsIsento\"\r",
											"              ]\r",
											"            },\r",
											"            \"frete\": {\r",
											"              \"type\": \"object\",\r",
											"              \"properties\": {\r",
											"                \"valor\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"peneiraLivre\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"icmsIsento\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"pontualidade\": {\r",
											"                  \"type\": \"integer\"\r",
											"                },\r",
											"                \"descontoData\": {\r",
											"                  \"type\": \"integer\"\r",
											"                }\r",
											"              },\r",
											"              \"required\": [\r",
											"                \"valor\",\r",
											"                \"peneiraLivre\",\r",
											"                \"icmsIsento\",\r",
											"                \"pontualidade\",\r",
											"                \"descontoData\"\r",
											"              ]\r",
											"            }\r",
											"          },\r",
											"          \"required\": [\r",
											"            \"subtotal\",\r",
											"            \"valorLiquido\",\r",
											"            \"valorLiquidoPontualidade\",\r",
											"            \"cultivar\",\r",
											"            \"tratamento\",\r",
											"            \"tecnologia\",\r",
											"            \"frete\"\r",
											"          ]\r",
											"        },\r",
											"        \"desmembramento\": {\r",
											"          \"type\": \"object\",\r",
											"          \"properties\": {\r",
											"            \"area\": {\r",
											"              \"type\": \"null\"\r",
											"            },\r",
											"            \"areaDisponivel\": {\r",
											"              \"type\": \"null\"\r",
											"            },\r",
											"            \"plantasHa\": {\r",
											"              \"type\": \"null\"\r",
											"            },\r",
											"            \"plantasDisponiveis\": {\r",
											"              \"type\": \"null\"\r",
											"            },\r",
											"            \"quantidadeDisponivel\": {\r",
											"              \"type\": \"integer\"\r",
											"            }\r",
											"          },\r",
											"          \"required\": [\r",
											"            \"area\",\r",
											"            \"areaDisponivel\",\r",
											"            \"plantasHa\",\r",
											"            \"plantasDisponiveis\",\r",
											"            \"quantidadeDisponivel\"\r",
											"          ]\r",
											"        }\r",
											"      },\r",
											"      \"required\": [\r",
											"        \"id\",\r",
											"        \"ref\",\r",
											"        \"index\",\r",
											"        \"volume\",\r",
											"        \"area\",\r",
											"        \"tipoHibrido\",\r",
											"        \"plantasMetro\",\r",
											"        \"plantasAdicionais\",\r",
											"        \"plantasHa\",\r",
											"        \"plantasTotais\",\r",
											"        \"quantidade\",\r",
											"        \"produto\",\r",
											"        \"peneira\",\r",
											"        \"tratamentoQuimico\",\r",
											"        \"embalagem\",\r",
											"        \"valores\",\r",
											"        \"desmembramento\"\r",
											"      ]\r",
											"    }\r",
											"  ]\r",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Schema é válido\", function () {\r",
											"    pm.expect(tv4.validate(pm.response.json(), pm.globals.get('schema'))).to.be.true;\r",
											"});\r",
											"\r",
											"pm.test(\"Capturar o id do item\", function () {\r",
											"    pm.globals.set(\"itemOrigemId\", pm.response.json().id)\r",
											"});\r",
											"\r",
											"// Verificar se a resposta é um array\r",
											"pm.test(\"Validar se o Response Body é um array\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"\r",
											"    pm.expect(responseBody).to.be.an('array');\r",
											"});\r",
											"\r",
											"pm.test(\"Validar campo 'volume' nos itens do array\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"\r",
											"     responseBody.forEach(function (item) {\r",
											"        pm.test(\"Verificar presença e tipo do campo 'volume'\", function () {\r",
											"            pm.expect(item).to.have.property('volume');\r",
											"            pm.expect(item.volume).to.be.a('number');\r",
											"            pm.expect(item.volume).to.be.eql(10000);\r",
											"        });\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"Validar campo 'quantidade' nos itens do array\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"\r",
											"     responseBody.forEach(function (item) {\r",
											"        pm.test(\"Verificar presença e tipo do campo 'quantidade'\", function () {\r",
											"            pm.expect(item).to.have.property('quantidade');\r",
											"            pm.expect(item.quantidade).to.be.a('number');\r",
											"            pm.expect(item.quantidade).to.be.eql(10);            // conforme schema, o campo deve ser INTEGER\r",
											"            \r",
											"        });\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"Validar campo 'id' do produto nos itens do array\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"\r",
											"     responseBody.forEach(function (item) {\r",
											"        pm.test(\"Verificar presença e tipo do campo 'id' do produto\", function () {\r",
											"            pm.expect(item).to.have.property('produto');\r",
											"            pm.expect(item.produto).to.have.property('id');\r",
											"            pm.expect(item.produto.id).to.be.a('number');\r",
											"            pm.expect(item.produto.id).to.be.eql(187);\r",
											"        });\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"Validar campo 'nome' do produto nos itens do array\", function () {\r",
											"    const responseBody = pm.response.json();\r",
											"\r",
											"     responseBody.forEach(function (item) {\r",
											"        pm.test(\"Verificar presença e tipo do campo 'nome' do produto\", function () {\r",
											"            pm.expect(item).to.have.property('produto');\r",
											"            pm.expect(item.produto).to.have.property('nome');\r",
											"            pm.expect(item.produto.nome).to.be.a('string');\r",
											"            pm.expect(item.produto.nome).to.be.eql(\"ULTRA IPRO\");\r",
											"        });\r",
											"    });\r",
											"});\r",
											"\r",
											"\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{host}}/api/pedidos/{{pedidoId}}/itens?tipoOperacao=DESMEMBRAMENTO",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"pedidos",
										"{{pedidoId}}",
										"itens"
									],
									"query": [
										{
											"key": "tipoOperacao",
											"value": "DESMEMBRAMENTO"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Solicitar cancelamento do pedido",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"motivoId\": 161,\r\n  \"descricao\": \"TESTANDO CANCELAMENTO VIA API\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{host}}/api/pedidos/{{pedidoId}}/solicitar-cancelamento",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"pedidos",
										"{{pedidoId}}",
										"solicitar-cancelamento"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	]
}